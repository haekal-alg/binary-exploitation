- `malloc` -> returns a **pointer** to allocated **data** in the heap. If **fails**, return 0.
- The heap manager ensures that the allocation will be **8-byte aligned on 32-bit systems and 16-byte aligned on 64-bit systems.**

## Use After Free (UAF)
- free chunk -> chunk (memory block) that is freed by the `free()` function
- When we free a chunk it will be added to a special linked list called “bins”
- bin -> a linked list of free chunks

```c
#include <malloc.h>
#include <stdio.h>

typedef struct function{
    void (*funct_ptr)();
} ptr;

void one() {
    printf("This is function one \n");
}

void two() {
    printf("This is function two \n");
}

void main() {
    ptr *malloc1 = malloc(sizeof(ptr)); // First malloc
    malloc1->funct_ptr = one;
    
    printf("Calling malloc1->funct_ptr \n");
    malloc1->funct_ptr();

    printf("Freeing malloc1 \n");
    free(malloc1);

    ptr *malloc2 = malloc(sizeof(ptr)); // Second malloc
    malloc2->funct_ptr = two;

    printf("Calling malloc2->funct_ptr \n");
    malloc2->funct_ptr();
    
    printf("Trying to call malloc1 \n");
    malloc1->funct_ptr();
}
```
1. https://infosecwriteups.com/arming-the-use-after-free-bc174a26c5f4

## Resources
- https://infosecwriteups.com/heap-exploitation-for-homo-sapiens-f166cd6a59fe